CREATE OR REPLACE PROCEDURE USPS_BGMODULEEVENTCHANGES (
   V_DDATE_MAID VARCHAR2 DEFAULT ' ',
   Cur_out OUT SYS_REFCURSOR
)
AS
   v_DATE DATE;
   v_MASTERID NUMBER(18);
BEGIN

 --v_DATE := TO_DATE(SUBSTR(V_DDATE_MAID, 1, 10), 'yyyy/MM/dd');
   --v_MASTERID := TO_NUMBER(SUBSTR(V_DDATE_MAID, 11, LENGTH(RTRIM(V_DDATE_MAID))));

    v_DATE := TO_DATE(SUBSTR(V_DDATE_MAID, 1, 10), 'yyyy/MM/dd');
    v_MASTERID:= TO_NUMBER(SUBSTR(V_DDATE_MAID,11,INSTR(V_DDATE_MAID,'*',1)-11));

    OPEN Cur_out FOR
    SELECT
        ACCOUNT_NUMBER,
        EFFECTIVE_DATE,
        EVENT_ID,
        REMARKS,
        BEFORE_VALUE,
        AFTER_VALUE
     FROM IFRS_EVENT_CHANGES
    WHERE MASTERID = v_MASTERID
    ORDER BY EFFECTIVE_DATE ASC;

END;
CREATE OR REPLACE PROCEDURE USPS_R_LGD_TERM_STRUCT_CHART
(
    v_MODEL_ID NUMBER,
    v_MODEL_SEQ NUMBER,
    Cur_out OUT SYS_REFCURSOR
)
AS
    v_status NUMBER(10);
BEGIN
    SELECT STATUS
    INTO v_status
    FROM IFRS_FL_MODEL_VAR
    WHERE PKID = v_MODEL_ID;

    IF v_status = 1 THEN
        OPEN Cur_out FOR
        SELECT 'Y' || FL_YEAR AS FL_YEAR, ROUND(OVERRIDE_LGD, 6) AS LGD
            FROM R_LGD_TERM_STRUCTURE
            WHERE MODEL_ID = v_MODEL_ID
            AND MODEL_SEQ = v_MODEL_SEQ;
    ELSE
        OPEN Cur_out FOR
        SELECT 'Y' || FL_YEAR AS FL_YEAR, ROUND(OVERRIDE_LGD, 6) AS LGD
            FROM R_LGD_TERM_STRUCTURE_PEN
            WHERE MODEL_ID = v_MODEL_ID
            AND MODEL_SEQ = v_MODEL_SEQ;
    END IF;

END;
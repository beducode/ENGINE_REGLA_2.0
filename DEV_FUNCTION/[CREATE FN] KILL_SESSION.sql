CREATE OR REPLACE FUNCTION KILL_SESSION(DATABASE_NAME TEXT)
RETURNS VOID 
LANGUAGE plpgsql
AS
$$
BEGIN
    -- Mengakhiri semua koneksi lain ke database tertentu
    PERFORM PG_TERMINATE_BACKEND(PID)
    FROM PG_STAT_ACTIVITY
    WHERE PID <> PG_BACKEND_PID()
      AND DATNAME = DATABASE_NAME;

    RAISE NOTICE 'ALL OTHER CONNECTIONS TO DATABASE % HAVE BEEN TERMINATED.', DATABASE_NAME;
END;
$$